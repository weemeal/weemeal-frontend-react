@tailwind base;
@tailwind components;
@tailwind utilities;

/* CSS Variables (Design Tokens) - Modern Design System */
:root {
    /* Primary palette - warm green for food/cooking */
    --primary-color: #2D6A4F;
    --primary-color-hover: #1B4332;
    --primary-color-light: #40916C;
    --primary-color-subtle: #D8F3DC;

    /* Secondary palette - warm accent */
    --secondary-color: #E76F51;
    --secondary-color-hover: #D64933;
    --secondary-color-light: #F4A261;
    --secondary-color-subtle: #FEF3E2;

    /* Neutral palette */
    --error-color: #DC2626;
    --error-color-hover: #B91C1C;
    --success-color: #16A34A;
    --warning-color: #F59E0B;

    /* Text colors */
    --text-color-dark: #1F2937;
    --text-color-muted: #6B7280;
    --text-color-light: #ffffff;

    /* Background colors */
    --background-color: #F9FAFB;
    --background-color-white: #ffffff;
    --background-color-subtle: #F3F4F6;

    /* Border colors */
    --border-color-light: #E5E7EB;
    --border-color-medium: #D1D5DB;

    /* Shadows - softer, more modern */
    --box-shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.07), 0 2px 4px -2px rgba(0, 0, 0, 0.05);
    --box-shadow-hover: 0 10px 15px -3px rgba(0, 0, 0, 0.08), 0 4px 6px -4px rgba(0, 0, 0, 0.05);
    --box-shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.05);

    /* Border radius */
    --card-border-radius: 16px;
    --card-border-radius-bottom: 0 0 16px 16px;
    --button-border-radius: 12px;

    /* Transitions */
    --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-base: 200ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-slow: 300ms cubic-bezier(0.4, 0, 0.2, 1);
}

/* Base styles */
* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html {
    scroll-behavior: smooth;
}

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    color: var(--text-color-dark);
    background-color: var(--background-color);
    min-height: 100vh;
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* Typography scale */
h1, h2, h3, h4, h5, h6 {
    line-height: 1.3;
    font-weight: 600;
}

/* Focus styles for accessibility */
:focus-visible {
    outline: 2px solid var(--primary-color);
    outline-offset: 2px;
}

/* Selection color */
::selection {
    background-color: var(--primary-color-subtle);
    color: var(--text-color-dark);
}

/* Tailwind custom utilities */
@layer utilities {
    .text-balance {
        text-wrap: balance;
    }
}

/* Tailwind custom components */
@layer components {
    /* Card component - modern glassmorphism-inspired */
    .card {
        @apply bg-white rounded-2xl shadow-card border border-gray-100/50;
        transition: all var(--transition-base);
    }

    .card:hover {
        @apply shadow-card-hover;
    }

    /* Button base styles - modern rounded with smooth transitions */
    .btn {
        @apply px-5 py-2.5 rounded-xl font-semibold cursor-pointer inline-flex items-center justify-center gap-2;
        transition: all var(--transition-fast);
    }

    .btn:active {
        transform: scale(0.98);
    }

    .btn-primary {
        @apply bg-primary text-white;
        box-shadow: 0 2px 8px -2px rgba(45, 106, 79, 0.4);
    }

    .btn-primary:hover {
        @apply bg-primary-hover;
        box-shadow: 0 4px 12px -2px rgba(45, 106, 79, 0.5);
        transform: translateY(-1px);
    }

    .btn-secondary {
        @apply bg-secondary text-white;
        box-shadow: 0 2px 8px -2px rgba(231, 111, 81, 0.4);
    }

    .btn-secondary:hover {
        @apply bg-secondary-hover;
        box-shadow: 0 4px 12px -2px rgba(231, 111, 81, 0.5);
        transform: translateY(-1px);
    }

    .btn-error {
        @apply bg-error text-white;
        box-shadow: 0 2px 8px -2px rgba(220, 38, 38, 0.4);
    }

    .btn-error:hover {
        @apply bg-error-hover;
        box-shadow: 0 4px 12px -2px rgba(220, 38, 38, 0.5);
        transform: translateY(-1px);
    }

    .btn-outline {
        @apply border-2 border-gray-200 bg-white text-text-dark;
    }

    .btn-outline:hover {
        @apply border-primary bg-primary-subtle text-primary;
    }

    .btn-ghost {
        @apply bg-transparent text-text-dark hover:bg-gray-100;
    }

    /* Form inputs - modern with subtle shadows */
    .input {
        @apply w-full px-4 py-3 border border-gray-200 rounded-xl bg-white text-text-dark;
        transition: all var(--transition-fast);
    }

    .input:focus {
        @apply outline-none border-primary;
        box-shadow: 0 0 0 4px rgba(45, 106, 79, 0.1);
    }

    .input::placeholder {
        @apply text-gray-400;
    }

    .input-error {
        @apply border-error;
        box-shadow: 0 0 0 4px rgba(220, 38, 38, 0.1);
    }

    /* Loading spinner - modern animated */
    .spinner {
        @apply w-12 h-12 rounded-full animate-spin;
        border: 3px solid var(--primary-color-subtle);
        border-top-color: var(--primary-color);
    }

    /* Recipe card specific styles - enhanced hover effects */
    .recipe-card {
        @apply card cursor-pointer overflow-hidden;
        transition: all var(--transition-base);
    }

    .recipe-card:hover {
        transform: translateY(-6px);
        @apply shadow-card-hover;
    }

    .recipe-card:hover .recipe-card-image {
        transform: scale(1.05);
    }

    .recipe-card-image {
        transition: transform var(--transition-slow);
    }

    /* Prevent image flickering on load */
    .recipe-card-image,
    .recipe-hero-image {
        opacity: 1;
        background-color: inherit;
    }

    /* Image container with stable dimensions */
    .image-container {
        @apply relative overflow-hidden;
        contain: layout paint;
    }

    /* Section header styles */
    .section-header {
        @apply text-lg font-bold text-text-dark mb-3;
        letter-spacing: -0.01em;
    }

    /* Ingredient list styles - improved spacing */
    .ingredient-item {
        @apply flex items-center gap-3 py-2 px-3 rounded-lg hover:bg-gray-50;
        transition: background-color var(--transition-fast);
    }

    .section-caption {
        @apply font-bold text-primary mt-6 mb-3 text-sm uppercase tracking-wide;
    }

    /* Drag handle styles */
    .drag-handle {
        @apply cursor-grab active:cursor-grabbing text-gray-300 hover:text-gray-500;
        transition: color var(--transition-fast);
    }

    /* QR Code modal styles - modern glassmorphism */
    .modal-overlay {
        @apply fixed inset-0 flex items-center justify-center z-50;
        background: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(4px);
        animation: fadeIn var(--transition-fast) ease-out;
    }

    .modal-content {
        @apply bg-white rounded-2xl p-8 max-w-md w-full mx-4;
        box-shadow: var(--box-shadow-lg);
        animation: slideUp var(--transition-base) ease-out;
    }

    /* Delete dialog styles */
    .delete-dialog {
        @apply text-center;
    }

    .delete-dialog-buttons {
        @apply flex gap-4 justify-center mt-8;
    }

    /* Badge styles */
    .badge {
        @apply inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium;
    }

    .badge-primary {
        @apply bg-primary-subtle text-primary;
    }

    .badge-secondary {
        @apply bg-orange-100 text-secondary;
    }

    /* Empty state styling */
    .empty-state {
        @apply flex flex-col items-center justify-center py-16 px-6 text-center;
    }

    .empty-state-icon {
        @apply w-20 h-20 text-gray-300 mb-6;
    }

    .empty-state-title {
        @apply text-xl font-semibold text-text-dark mb-2;
    }

    .empty-state-description {
        @apply text-gray-500 mb-6 max-w-md;
    }
}

/* Animations */
@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(16px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes slideInRight {
    from {
        opacity: 0;
        transform: translateX(16px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes pulse-subtle {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.7;
    }
}

/* Markdown content styles for recipe instructions */
.recipe-instructions {
    @apply text-text-dark leading-relaxed;
}

.recipe-instructions h1,
.recipe-instructions h2,
.recipe-instructions h3 {
    @apply font-bold mt-4 mb-2;
}

.recipe-instructions h1 {
    @apply text-2xl;
}

.recipe-instructions h2 {
    @apply text-xl;
}

.recipe-instructions h3 {
    @apply text-lg;
}

.recipe-instructions p {
    @apply mb-4;
}

.recipe-instructions ul,
.recipe-instructions ol {
    @apply ml-6 mb-4;
}

.recipe-instructions ul {
    @apply list-disc;
}

.recipe-instructions ol {
    @apply list-decimal;
}

.recipe-instructions li {
    @apply mb-1;
}

.recipe-instructions code {
    @apply bg-gray-100 px-1 py-0.5 rounded text-sm;
}

.recipe-instructions pre {
    @apply bg-gray-100 p-4 rounded-lg overflow-x-auto mb-4;
}

.recipe-instructions blockquote {
    @apply border-l-4 border-primary pl-4 italic my-4;
}

/* Auto-expanding textarea */
.textarea-auto {
    @apply w-full min-h-[120px] resize-none overflow-hidden;
    field-sizing: content;
}

/* Drag and drop styles */
.dragging {
    @apply opacity-50;
}

.drag-over {
    @apply border-2 border-dashed border-secondary;
    background-color: rgba(10, 130, 255, 0.05);
}
